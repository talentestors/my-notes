---
# 当前页面内容标题
title: 第八章 正则表达式
# 当前页面图标
icon: javascript
# 分类
category:
  - 前端
  - JavaScript
# 标签
tag:
  - JavaScript
  - web
sticky: false
# 是否收藏在博客主题的文章列表中，当填入数字时，数字越大，排名越靠前。
star: false
# 是否将该文章添加至文章列表中
article: false
# 是否将该文章添加至时间线中
timeline: false
---

## 一、什么是正则表达式

正则表达式是由一个字符序列形成的搜索模式，搜索模式可用于文本搜索和文本替换以及文本检测。

## 二、创建正则表达式

JS 正则表达式的创建有两种方式： `new RegExp()` 和 直接字面量。

```dart
var re=new RegExp ();
//RegExp 是JS中的类，同Array类似。然而这个创建方法没有指定表达式内容
re=new RegExp ("a");
//最简单的正则表达式，将匹配字母a
re=new RegExp ("a","i");
//重载的构造函数，其第二个参数指定将不区分大小写
```

其中，对于第二个参数，为可选参数，常用的有：

- `g`：全文查找；
- `i`：不区分大小写；

然而更为常见的正则表达式创建法则是：字面量的声明方式。 即：

```jsx
var re = /a/i;
//其作用同：re=new RegExp ("a","i")，而且更常用。
```

## 三、正则表达式本身的方法

在 JavaScript 中，RegExp 对象是一个预定义了属性和方法的正则表达式对象。

- `test()` 方法 `test()` 方法用于检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文本，则返回`true`，否则返回 `false`。

```javascript
//以下实例用于搜索字符串中的字符 "e"：
var patt = /e/;
patt.test("The best things in life are free!");
字符串中含有 "e"，所以该实例输出为：
true
以上两行代码可以合并为一行：
/e/.test("The best things in life are free!")
```

- `exec()` 方法 `exec()` 方法用于检索字符串中的正则表达式的匹配。 该函数返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 `null`。 以下实例用于搜索字符串中的字母 `e`:

```bash
/e/.exec("The best things in life are free!");
字符串中含有 "e"，所以该实例输出为:
e
```

比较常用的就是正则表达式的`test`方法了，因为大多只需要知道：某个字符串是否匹配某正则表达式，是则`True`，否则为`False`。

## 四、字符串对象中与正则表达式有关的方法

在 JavaScript 中，正则表达式通常用于两个字符串方法 : `search()`和 `replace()`。

```javascript
search();
```

方法

1. 检索与正则表达式相匹配的子字符串，并返回子串的起始位置。

```jsx
//使用正则表达式搜索 "Runoob" 字符串，且不区分大小写：
var str = "Visit Runoob!";
var n = str.search(/Runoob/i);
//输出结果为：
6;
```

1. 用于检索字符串中指定的子字符串。 `search`方法可使用字符串作为参数。字符串参数会转换为正则表达式：

```csharp
//检索字符串中 "Runoob" 的子串：
var str = "Visit Runoob!";
var n = str.search("Runoob");
```

- `replace()` 方法 `replace()` 方法将接收字符串作为参数：

```jsx
var str = "Visit W3CSchool!";
var n = str.replace("W3CSchool", "Runoob");
console.log(n);
//结果Visit Runoob!
console.log(str);
//结果Visit W3CSchool!
```

## 五、常用语法分析

### 5.1 ()、[]、{} 的区别

先看个例子 校验字符串是否全由 8 位数字组成

```jsx
function isStudentNo(str) {
  var reg = /^[0-9]{8}$/; /*定义验证表达式*/
  return reg.test(str); /*进行验证*/
}
```

`[]`是定义匹配的字符范围。`[0-9]`表示查找任何从 0 至 9 的数字。

`{}` 一般用来表示匹配的长度。`{8}`表示位数为 8 位。

`()` 的作用是提取匹配的字符串。表达式中有几个`()`就会得到几个相应的匹配字符串。比如`(\s+)`表示连续空格的字符串。

### 5.2 ^ 和 $

`^` 匹配一个字符串的开头，比如 (`^a`) 就是匹配以字母`a`开头的字符串

`$` 匹配一个字符串的结尾,比如 (`b$`) 就是匹配以字母`b`结尾的字符串

```javascript
^`还有另个一个作用就是取反，比如`[^xyz]`表示匹配的字符串不包含`xyz
```

需要注意的是：如果`^`出现在`[]`中一般表示取反，而出现在其他地方则是匹配字符串的开头。

### 5.3 \d \s \w

`\d` 匹配一个非负整数， 等价于 `[0-9]`；

`\s` 匹配一个空白字符；

`\w` 匹配一个英文字母或数字，等价于`[0-9a-zA-Z]`；

`.` 匹配除换行符以外的任意字符，等价于`[^\n]`。

### 5.4 \* + ?

`*`表示匹配前面元素 0 次或多次，比如`(\s*)`就是匹配 0 个或多个空格；

`+` 表示匹配前面元素 1 次或多次，比如`(\d+)`就是匹配由至少 1 个整数组成的字符串；

`?`表示匹配前面元素 0 次或 1 次，相当于`{0,1}`，比如`(\w?)` 就是匹配最多由 1 个字母或数字组成的字符串 。

## 六、语法大全

**修饰符** 修饰符用于执行区分大小写和全局匹配:

| 修饰符 | 描述                                                     |
| :----- | :------------------------------------------------------- |
| `i`    | 执行对大小写不敏感的匹配。                               |
| `g`    | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。 |
| `m`    | 执行多行匹配。                                           |

**方括号** 方括号用于查找某个范围内的字符：

| 表达式   | 描述                               |                            |
| :------- | :--------------------------------- | -------------------------- |
| `[abc]`  | 查找方括号之间的任何字符。         |                            |
| `[^abc]` | 查找任何不在方括号之间的字符。     |                            |
| `[0-9]`  | 查找任何从 0 至 9 的数字。         |                            |
| `[a-z]`  | 查找任何从小写 a 到小写 z 的字符。 |                            |
| `[A-Z]`  | 查找任何从大写 A 到大写 Z 的字符。 |                            |
| `[A-z]`  | 查找任何从大写 A 到小写 z 的字符。 |                            |
| `[adgk]` | 查找给定集合内的任何字符。         |                            |
| `[^adgk  | ]`                                 | 查找给定集合外的任何字符。 |

**元字符** 元字符（`Metacharacter`）是拥有特殊含义的字符：

| 元字符   | 描述                                        |
| :------- | :------------------------------------------ |
| **`.`**  | **查找单个字符，除了换行和行结束符。**      |
| **`\w`** | **查找单词字符。**                          |
| **`\W`** | **查找非单词字符。**                        |
| **`\d`** | **查找数字。**                              |
| **`\D`** | **查找非数字字符。**                        |
| **`\s`** | **查找空白字符。**                          |
| **`\S`** | **查找非空白字符。**                        |
| `\b`     | 匹配单词边界。                              |
| `\B`     | 匹配非单词边界。                            |
| `\0`     | 查找 NULL 字符。                            |
| `\n`     | 查找换行符。                                |
| `\f`     | 查找换页符。                                |
| `\r`     | 查找回车符。                                |
| `\t`     | 查找制表符。                                |
| `\v`     | 查找垂直制表符。                            |
| `\xxx`   | 查找以八进制数 xxx 规定的字符。             |
| `\xdd`   | 查找以十六进制数 dd 规定的字符。            |
| `\uxxxx` | 查找以十六进制数 xxxx 规定的 Unicode 字符。 |

**量词**

| 量词     | 描述                                                                                                                                                                                                                                                                         |
| :------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `n+`     | 匹配任何包含至少一个 `n`的字符串。例如，`/a+/` 匹配 `candy`中的 `a`，`caaaaaaandy` 中所有的`a`。                                                                                                                                                                             |
| `n*`     | 匹配任何包含零个或多个 `n` 的字符串。例如，`/bo*/`匹配 `A ghost booooed` 中的 `boooo`，`A bird warbled` 中的 `b`，但是不匹配 `A goat grunted`。                                                                                                                              |
| `n?`     | 匹配任何包含零个或一个 `n` 的字符串。例如，`/e?le?/` 匹配 `angel` 中的 `el`，`angle` 中的 `le`。                                                                                                                                                                             |
| `n{X}`   | 匹配包含`X` 个`n`的序列的字符串。例如，`/a{2}/`不匹配 `candy,` 中的 `a`，但是匹配 `caandy,` 中的两个 `a`，且匹配 `caaandy.` 中的前两个 `a`。                                                                                                                                 |
| `n{X,}`  | `X` 是一个正整数。前面的模式 `n` 连续出现至少`X` 次时匹配。例如，`/a{2,}/`不匹配 `candy` 中的 `a`，但是匹配 `caandy` 和 `caaaaaaandy.` 中所有的 `a`。                                                                                                                        |
| `n{X,Y}` | `X`和 `Y` 为正整数。前面的模式`n` 连续出现至少 `X`次，至多 `Y`次时匹配。例如，`/a{1,3}/` 不匹配 `cndy`，匹配 `candy,` 中的 `a`，`caandy,` 中的两个 `a`，匹配 `caaaaaaandy` 中的前面三个 `a`。注意，当匹配 `caaaaaaandy` 时，即使原始字符串拥有更多的 `a`，匹配项也是 `aaa`。 |
| `n{X,}`  | 匹配包含至少 `X` 个`n` 的序列的字符串。                                                                                                                                                                                                                                      |
| `n$`     | 匹配任何结尾为 `n`的字符串。                                                                                                                                                                                                                                                 |
| `^n`     | 匹配任何开头为`n`的字符串。                                                                                                                                                                                                                                                  |
| `?=n`    | 匹配任何其后紧接指定字符串`n` 的字符串。                                                                                                                                                                                                                                     |
| `?!n`    | 匹配任何其后没有紧接指定字符串 `n` 的字符串。                                                                                                                                                                                                                                |

## 七、常用的 js 正则表达式

```javascript
1.验证用户名和密码：”^[a-zA-Z]\w{5,15}$”

2.验证电话号码：（”^\d{3,4}-\d{7,8}$”）

eg：021-68686868 0511-6868686；

3.验证手机号码：”^1[3|4|5|7|8][0-9]\d{8}$”；

4.验证身份证号（15位或18位数字）：”\d{14}[[0-9],0-9xX]”；

5.验证Email地址：(“^\w+([-+.]\w+)@\w+([-.]\w+).\w+([-.]\w+)*$”)；

6.只能输入由数字和26个英文字母组成的字符串：(“^[A-Za-z0-9]+$”) ;

7.整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$

8.只能输入数字：”^[0-9]*$”。

9.只能输入n位的数字：”^\d{n}$”。

10.只能输入至少n位的数字：”^\d{n,}$”。

11.只能输入m~n位的数字：”^\d{m,n}$”。

12.只能输入零和非零开头的数字：”^(0|[1-9][0-9]*)$”。

13.只能输入有两位小数的正实数：”^[0-9]+(.[0-9]{2})?$”。

14.只能输入有1~3位小数的正实数：”^[0-9]+(.[0-9]{1,3})?$”。

15.只能输入非零的正整数：”^+?[1-9][0-9]*$”。

16.只能输入非零的负整数：”^-[1-9][]0-9″*$。

17.只能输入长度为3的字符：”^.{3}$”。

18.只能输入由26个英文字母组成的字符串：”^[A-Za-z]+$”。

19.只能输入由26个大写英文字母组成的字符串：”^[A-Z]+$”。

20.只能输入由26个小写英文字母组成的字符串：”^[a-z]+$”。

21.验证是否含有%&’,;=?$\”等字符：”[%&',;=?$\x22]+”。

22.只能输入汉字：”^[\u4e00-\u9fa5]{0,}$”。

23.验证URL：”^http://([\w-]+.)+[\w-]+(/[\w-./?%&=]*)?$”。

24.验证一年的12个月：”^(0?[1-9]|1[0-2])$”正确格式为：”01″～”09″和”10″～”12″。

25.验证一个月的31天：”^((0?[1-9])|((1|2)[0-9])|30|31)$”正确格式为；”01″～”09″、”10″～”29″和“30”~“31”。

26.获取日期正则表达式：[\d{4](file:////d%7B4)}[年|-|.]\d{\1-\12}[月|-|.]\d{\1-\31}日?

评注：可用来匹配大多数年月日信息。

27.匹配双字节字符(包括汉字在内)：[^\x00-\xff]

评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1）

28.匹配空白行的正则表达式：\n\s*\r

评注：可以用来删除空白行

29.匹配HTML标记的正则表达式：<(\S?)[^>]>.?</>|<.? />

评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力

30.匹配首尾空白字符的正则表达式：^\s|\s$

评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式

31.匹配网址URL的正则表达式：[a-zA-z]+://[^\s]*

评注：网上流传的版本功能很有限，上面这个基本可以满足需求

32.匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$

评注：表单验证时很实用

33.匹配腾讯QQ号：[1-9][0-9]{4,}

评注：腾讯QQ号从10 000 开始

34.匹配中国邮政编码：[1-9]\d{5}(?!\d)

评注：中国邮政编码为6位数字

35.匹配ip地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。
```
